<!--FIle:prap.view.html
Usesutility/attachments/attachments.view.html
Usesprap.controller.js
-->
<link rel="stylesheet" type="text/css" href="../../css/site.css">
<div class="container" id="prapContainer" ng-app="myApp" ng-controller="prapController"
     xmlns="http://www.w3.org/1999/html">
    <form>
        <div>
            <div class="col-xs-12">
                <h1>PRAP</h1>
            </div>
        </div>

        <!--When this button is clicked, the page becomes editable
    <div>
        <button class="btn btnEdit" ng-click="editSection('contactNote')"> Edit</button><!--check this
    </div>

        <!-- this div is only viewable after the user clicks on edit
        <div ng-if="!NotEditable">
            <!-- the cancel button calls the cancelUpdate function to cancel the current input
            <button class="btn btnCancel" ng-click="cancelNotes()"> Cancel</button>
            <!-- the save button calls the saveContacts function when clicked to save the current
            input to the database -
            <button class="btn btnSave" ng-click="saveNotes()"> Save</button>
            <button class="btn btnCreate" ng-click="addNote()"> Add Note</button>
        </div>
-->

        <table id="notesTable" class="able minerva-table">
            <thead>
            <tr>
                <th colspan="3"> Notes
                    <button class="btn btnEdit" ng-click="makeNotesEditable()" ng-hide="editNotes"> Edit</button>
                    <button class="btn btnSave" ng-click="saveNotesUpdate(tasks)" ng-show="editNotes"> Save</button>
                    <button class="btn btnCancel" ng-click="cancelNotesUpdate()" ng-show="editNotes"> Cancel</button>
                </th>
            </tr>
            </thead>
            <tr ng-repeat="note in prapNotes track by $index" style="outline: thin solid">
                <!-- the attachments section is not visible until edit is clicked on -->
                <td style="width:35%">
                    <table>
                        <tr>
                            <td>
                                <strong>Creator</strong>:<br/>
                                <input type="text" ng-disabled="!editNotes" ng-model="note.NoteCreatedByName">
                            </td>
                            <td>
                                <br/>
                                <input type="date" ng-disabled="!editNotes" ng-model="note.NoteCreatedDate">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>Editor</strong>:<br/>
                                <input type="text" ng-disabled="!editNotes" ng-model="note.NoteEditedByName">
                            </td>
                            <td><br/>
                                <input type="date" ng-disabled="!editNotes" ng-model="note.NoteEditedDate">
                            </td>
                        </tr>
                    </table>
                </td>

                <td>
                    <textarea rows="4" style="resize:vertical;" class="form-control" ng-disabled="!editNotes"
                              ng-model="note.GenNote"></textarea>                            <!--NOTE 1-->
                </td>
                <td style="width:100px">
                    <button ng-click="deleteNote($index)" class="btn btnDelete" ng-disabled="!editNotes">Delete</button>
                </td>
            </tr>
        </table>


        <table id="contactsTable" class="table minerva-table">
            <thead>
            <tr>
                <th colspan="3"> Mentor Contacts
                    <button class="btn btnEdit" ng-click="makeContactsEditable()" ng-hide="editContacts"> Edit</button>
                    <button class="btn btnSave" ng-click="saveContactsUpdate(tasks)" ng-show="editContacts"> Save</button>
                    <button class="btn btnCancel" ng-click="cancelContactsUpdate()" ng-show="editContacts"> Cancel</button>
                </th>
            </tr>
            </thead>
            <tr ng-repeat="contact in mentorContacts track by $index" style="outline: thin solid">
                <td style="width:100px">
                    <table>
                        <!-- this input is not editable until the user clicks edit -->
                        <input type="date" ng-disabled="!editContacts" class="form-control"
                               ng-model="contact.ContactDate">

                        <!-- this input is disabled until the user clicks edit -->
                        <input type="text" ng-disabled="!editContacts" class="form-control"
                               ng-model="contact.MentorContactType">

                        <!-- this input is disabled until the user clicks edit -->
                        <input type="text" ng-disabled="!editContacts" class="form-control" ng-model="contact.MentorName">
                    </table>
                </td>
                <td>
                        <textarea rows="3" style="min-width: 100%" class="form-control" ng-disabled="!editContacts"
                                  ng-model="contact.MentorContactNote"></textarea>
                </td>
                <td style="width:100px">
                    <button ng-click="deleteContact($index)" class="btn btnDelete" ng-disabled="!editContacts"> Delete</button>

                </td>
            </tr>
        </table>


        <div class="form-row">
            <div class="col-md-5d-noned-md-block"></div>
            <div class="form-rowjustify-content-centercol-md-2">
                <!-- the AddNote button is not visible until the user clicks the edit button -->
                <div ng-if="!NotEditable">
                    <button class="btn btnCreate" ng-click="addMentorContactNote()" class="col-xs-12btn-danger"> Add
                        Note
                    </button>
                </div>
                <div class="col-md-5d-noned-md-block"></div>
            </div>
        </div>

        <!-- ACTION PLAN AND GOALS -->
        <table id="actionPlanTable" class="table minerva-table">
            <thead>
            <tr>
                <th colspan="5"> Action Plan and Goals
                    <button class="btn btnEdit" ng-click="makeGoalsEditable()" ng-hide="editGoals"> Edit</button>
                    <button class="btn btnSave" ng-click="saveGoalsUpdate(tasks)" ng-show="editGoals"> Save</button>
                    <button class="btn btnCancel" ng-click="cancelGoalsUpdate()" ng-show="editGoals"> Cancel</button>
                </th>
            </tr>
            </thead>
            <tr>
                <th> Category</th>
                <th> Sponsor</th>
                <th> Initiated Date</th>
                <th> Completed Date</th>
                <th> Mentee Training Date</th>
            </tr>
            <tr>
                <td>
                    <input type="text" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.PRAPCategory">
                </td>
                <td>
                    <input type="text" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.PRAPSponsorID">
                </td>
                <td>
                    <!-- the input box is disabled until the user clicks the edit button -->
                    <input type="date" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.PRAPInitDate">
                </td>
                <td>
                    <!-- the input box is disabled until the user clicks the edit button -->
                    <input type="date" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.PRAPCompleteDate">
                </td>
                <td>
                    <!-- the input box is disabled until the user clicks the edit button -->
                    <input type="date" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.MenteeTrainingDate">
                </td>
            </tr>
        </table>

        <table id="goalsTable" class="table minerva-table">
            <tr>
                <th style="width:100px"> Term</th>
                <th style="width:100px"> Date</th>
                <th> Details</th>
            </tr>

            <tr>
                <td> Short Term</td>
                <td>
                    <!-- the input box is disabled until the user clicks the edit button -->
                    <input type="date" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.ShortTermGoalDate">
                </td>
                <td>                    <!-- the input box is disabled until the user clicks the edit button -->
                    <textarea rows="3" style="min-width: 100%" class="form-control" ng-disabled="!editGoals"
                              ng-model="cadetClass.ShortTermGoal"></textarea>
                </td>
            </tr>
            <tr>
                <td> Intermediate Term</td>
                <td>
                    <!-- the input box is disabled until the user clicks the edit button -->
                    <input type="date" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.IntermediateGoalDate">
                </td>
                <td>
                    <!-- the input box is disabled until the user clicks the edit button -->
                    <textarea rows="3" style="min-width: 100%" class="form-control" ng-disabled="!editGoals"
                              ng-model="cadetClass.IntermediateGoal"> </textarea>
                </td>
            </tr>

            <tr>
                <td> Long Term</td>
                <td><input type="date" ng-disabled="!editGoals" class="form-control"
                           ng-model="cadetClass.LongTermGoalDate"></td>
                <td>   <textarea rows="3" style="min-width: 100%" class="form-control" ng-disabled="!editGoals"
                                 ng-model="cadetClass.LongTermGoal"></textarea></td>
            </tr>
        </table>

        <fieldset class="form-group">
            <div class="row">
                <div class="col-md-12">
                    <ng-include src="'./utility/attachments/attachments.view.html'"></ng-include>
                </div>
            </div>
        </fieldset>

    </form>
</div>
<script>
    function addNote() {
        var table = document.getElementById("notesTable");
        var row = table.insertRow(table.length);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        var cell5 = row.insertCell(4);
        cell1.innerHTML = "Created By <input type=\"text\" ng-model=\"note.NoteCreatedByName\">";
        cell2.innerHTML = "Created Date <input type=\"date\" ng-model=\"note.NoteCreatedDate\">";
        cell3.innerHTML = "Edited By <input type=\"text\" ng-model=\"note.NoteEditedByName\">";
        cell4.innerHTML = "Edited Date <input type=\"date\" ng-model=\"note.NoteEditedDate\">";
        cell5.innerHTML = "Note <textarea style=\"resize:vertical;\" ng-model=\"note.GenNote\"></textarea>";
    }
</script>